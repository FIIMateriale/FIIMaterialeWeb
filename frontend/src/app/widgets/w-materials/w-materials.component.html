<app-widget-card>
  <div class="flex flex-col gap-4">

    <div class="font-bold text-ms">Materials</div>

    <form class="block">
      <input type="text" name="searchQuery" [(ngModel)]="searchQuery" (ngModelChange)="onSearchChange()" id="first_name" class="bg-gray-200 text-black border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
             placeholder="Search by name(ro,en), credits, or short(ro)" required>
    </form>

    <div class="flex sm:flex-row flex-col gap-4">
      <div class="sm:basis-2/3 basis-full flex gap-4">
        <button class="basis-1/2 text-white px-3 py-2 rounded-md text-sm font-medium" (click)="onCycleChange(cycleType.BACHELORS)"
                [ngClass]="selectedCycle === cycleType.BACHELORS ? 'bg-gray-200 text-black hover:bg-gray-300' : 'bg-gray-800 hover:bg-gray-900'">Bachelors. Year: {{selectedYear}}</button>
        <button class="sm:basis-1/3 bg-gray-500 text-gray-300 px-3 py-2 rounded-md text-sm font-medium" (click)="onCycleChange(cycleType.MASTERS)"
                [ngClass]="selectedCycle === cycleType.MASTERS ? 'bg-gray-200 text-black hover:bg-gray-300' : ''" disabled>Masters</button>
      </div>
      <div class="sm:basis-1/2 basis-full flex gap-4">
        <a href="{{additionalResources.DOCS}}" target="_blank" class="basis-1/3">
          <button class="w-full bg-gray-800 hover:bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium">
            <i class="fa-solid fa-folder"></i>
            Docs
          </button>
        </a>
        <a href="{{additionalResources.GRADUATION}}" target="_blank" class="basis-2/3">
          <button class=" w-full bg-gray-800 hover:bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium">
            <i class="fa-solid fa-graduation-cap"></i>
            Graduation</button>
        </a>
      </div>
    </div>

    <div class="flex flex-row gap-4 justify-between flex-wrap">
      <button *ngFor="let semesterCount of semesters" class="text-white px-3 py-2 rounded-md text-sm font-medium" (click)="onSemesterChange(semesterCount)"
              [ngClass]="selectedSemester === '' + semesterCount ? 'bg-gray-200 text-black hover:bg-gray-300' : 'bg-gray-800 hover:bg-gray-900'">Semester {{semesterCount}}</button>
    </div>

    <div class="overflow-auto max-h-[49.5rem]">
      <div class="flex flex-col gap-4 overflow-auto">

        <div *ngFor="let _class of filteredClasses" class="flex flex-row justify-between bg-white rounded-lg shadow overflow-hidden">

          <div class="w-2"
               [class.bg-gray-400]="_class.type === classTypes.NORMAL"
               [class.bg-sky-400]="_class.type === classTypes.OPTIONAL_1"
               [class.bg-emerald-400]="_class.type === classTypes.OPTIONAL_2"
               [class.bg-orange-400]="_class.type === classTypes.OPTIONAL_3"
               [class.bg-indigo-400]="_class.type === classTypes.FACULTY"
          ></div>

          <img src="{{_class.photo || defaultClassPhoto}}" class="hidden sm:h-[12rem] sm:inline aspect-square rounded-r-lg" alt="">

          <div class="flex flex-col basis-full gap-4 p-4">
            <div class="text-xl font-bold">{{_class.name}}</div>

            <div class="basis-full text-gray-600 text-sm">
              <div>Credits: {{_class.credits}}</div>
              <div>Type: {{_class.type}}</div>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <a href="{{_class.materials}}" target="_blank">
                <button class="w-full bg-gray-800 text-white px-3 py-2 rounded-md text-sm font-medium"
                        [disabled]="_class.materials === ''" [ngClass]="_class.materials === '' ? 'bg-gray-500 text-gray-300' : 'hover:bg-gray-900'">
                  <i class="fa-solid fa-download mr-1"></i>
                  <span class="hidden sm:inline">Download</span></button>
              </a>
              <a href="{{_class.site}}" target="_blank">
                <button class="w-full bg-gray-800 text-white px-3 py-2 rounded-md text-sm font-medium"
                        [disabled]="_class.site === ''" [ngClass]="_class.site === '' ? 'bg-gray-500 text-gray-300' : 'hover:bg-gray-900'">
                  <i class="fa-solid fa-arrow-up-right-from-square mr-1"></i>
                  <span class="hidden sm:inline">Site</span></button>
              </a>
            </div>
          </div>


        </div>

      </div>
    </div>

  </div>
</app-widget-card>
